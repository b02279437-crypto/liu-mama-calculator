<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LIU MAMA Order</title>

<!-- 字體 -->
<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Noto+Serif+TC:wght@500;600&display=swap" rel="stylesheet">
<!-- 截圖功能 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

<style>
:root{
  --milk:#E8D9C4;
  --navy:#1E4F7B;
  --bg:#f7f6f2;
  --gray-blue:#7f9bb3;
  --milk-solid:#e9e3d7;
}

html,body{
  margin:0; padding:0; height:100%;
  background-color:var(--bg); color:#2c3e50;
  font-family:'Noto Serif TC','Microsoft JhengHei',serif;
  text-align:center; overflow-x:hidden; scroll-behavior:smooth;
}

/* ===== 開場動畫（新版品牌版） ===== */
#intro {
  position: fixed;
  inset: 0;
  background-color: var(--bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 1;
  transition: opacity 0.9s ease;
}

#intro.fade-out {
  opacity: 0;
  pointer-events: none;
}

#intro-logo {
  width: 60vw;
  max-width: 400px;
  opacity: 0;
  transform: scale(0.96);
  transition: opacity 1.4s ease, transform 2s ease;
}
#intro-logo.show {
  opacity: 1;
  transform: scale(1);
}
#intro-logo.hide {
  opacity: 0;
  transform: scale(1.03);
  transition: opacity 1.2s ease;
}

#intro-text {
  margin-top: 60px;
  text-align: center;
  max-width: 700px;
  font-size: 15.5px;
  color: #333;
  line-height: 2.4;
  letter-spacing: 0.5px;
}
#intro-text p {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 1.8s ease forwards;
}
#intro-text p:nth-of-type(1) { animation-delay: 3.2s; }
#intro-text p:nth-of-type(2) { animation-delay: 4.0s; }
#intro-text p:nth-of-type(3) { animation-delay: 4.8s; }
#intro-text p.last-line { animation-delay: 5.6s; font-weight: 600; color: var(--navy); }

#startBtn {
  margin-top: 70px;
  padding: 14px 46px;
  font-size: 30px;
  font-family: 'Amatic SC', cursive;
  letter-spacing: 2px;
  background-color: #ddd5c7;
  color: #2c3e50;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.9s ease, transform 0.5s ease, background-color 0.2s ease;
}
#startBtn.show {
  opacity: 1;
  transform: translateY(0);
}
#startBtn:hover {
  background-color: #e7dfd2;
  transform: translateY(-2px);
}

/* 動畫定義 */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== 主內容 ===== */
main{opacity:0; visibility:hidden; transition:opacity 1s ease;}
main.show{opacity:1; visibility:visible;}
h2{
  font-size:90px; font-weight:900; color:var(--navy);
  margin:28px 0 10px 0;
  animation:titleFade 1.8s ease forwards;
}
@keyframes titleFade {
  0% {opacity: 0; transform: translateY(12px) scale(0.95);}
  50% {opacity: 0.7; transform: translateY(4px) scale(1.01);}
  100% {opacity: 1; transform: translateY(0) scale(1);}
}
h2 .english{font-family:'Amatic SC',cursive; font-weight:900;}
.section-title{font-size:14px; color:#555; margin:10px 0 8px;}

.reveal{opacity:0; transform:translateY(34px); transition:all .9s;}
.reveal.in{opacity:1; transform:translateY(0);}

.input-container{
  max-width:500px; margin:0 auto 30px; text-align:left;
  background:#fff; padding:25px 28px; border-radius:16px;
  box-shadow:0 6px 22px rgba(0,0,0,.05);
}
.input-group{display:flex; flex-direction:column; gap:5px; margin-bottom:18px;}
.input-group label{font-size:14px; color:#333;}
.input-group input{
  font-size:14px; padding:8px 10px; border:1px solid #ccc; border-radius:8px; background:#fafafa;
}
.input-group input:focus{border-color:var(--navy); background:#fff; box-shadow:0 0 6px rgba(30,79,123,.25);}
.input-error{border-color:#e74c3c !important;}

table{
  width:90%; max-width:500px; margin:15px auto;
  border-collapse:separate; border-spacing:0; background:#fff; border-radius:14px;
  box-shadow:0 2px 10px rgba(0,0,0,.08); font-size:15px;
}
th,td{padding:10px; border-bottom:1px solid #e9eef2;}
th{background-color:var(--gray-blue); color:#fff; font-weight:500;}
select{width:100%; font-size:14px; padding:5px 6px; border-radius:6px; border:1px solid #ccc;}
input[type='checkbox']{transform:scale(1.2);}
.total{font-size:20px; font-weight:600; color:var(--navy); margin-top:20px;}

.account-box{
  width:85%; max-width:350px; margin:25px auto;
  background:rgba(255,255,255,0.5);
  backdrop-filter:blur(12px) brightness(1.05);
  border:1px solid rgba(255,255,255,0.4);
  color:#333; padding:16px; border-radius:16px; font-size:13px;
  box-shadow:0 8px 24px rgba(0,0,0,0.07);
}
.account-box h3{
  margin:8px 0;
  font-weight:600;
  font-size:15px;
  color:#44566C;
  letter-spacing:0.5px;
}

.copy-btn,#screenshotBtn,#formBtn{
  border:none; padding:12px 22px; border-radius:999px;
  font-size:16px; cursor:pointer; font-weight:500;
  transition:.25s;
  box-shadow:0 3px 10px rgba(0,0,0,0.08);
}
.copy-btn,#screenshotBtn{background-color:var(--milk-solid); color:#1f2a33;}
.copy-btn:hover,#screenshotBtn:hover{background-color:#e4ddcf; transform:translateY(-2px);}
#formBtn{
  background-color:var(--navy); color:#fff;
  box-shadow:0 4px 14px rgba(30,79,123,0.35);
}
#formBtn:hover{background-color:#245c91; transform:translateY(-2px);}
#buttonContainer{display:flex; justify-content:center; gap:15px; flex-wrap:wrap; margin-top:25px;}
#formReminder{font-size:14px; color:#555; margin-top:10px; opacity:0; transform:translateY(14px); transition:all .8s;}
#formReminder.in{opacity:1; transform:translateY(0);}

@media (max-width:480px){
  h2{font-size:60px;}
  table{font-size:13.5px; width:95%;}
  .input-container{width:90%; padding:18px;}
  .account-box{font-size:12.5px; width:90%;}
  .copy-btn,#screenshotBtn,#formBtn{font-size:14px; padding:10px 18px;}
}
</style>
</head>

<body>
<!-- ===== 開場動畫 ===== -->
<div id="intro">
  <img id="intro-logo" src="https://github.com/b02279437-crypto/liu-mama-calculator/blob/main/logo.png?raw=true" alt="Logo">

  <div id="intro-text">
    <p>源於一趟遠赴成都的旅程，<br>只為尋回最純正的麻辣靈魂。</p>
    <p>手工細炒、慢火淬鍊，<br>十三味藥材與辣椒交織成一鍋香氣。</p>
    <p>濃郁不膩，麻中帶香，<br>是一鍋可以細細品的麻辣。</p>
    <p class="last-line">劉嘛麻，<br>一鍋來自初心的溫度。</p>
  </div>

  <button id="startBtn">Start Order</button>
</div>

<!-- ===== 主內容 ===== -->
<main id="mainContent">
  <h2 id="pageTitle"><span class="english">LIU MAMA Order</span></h2>

  <section class="reveal left" data-delay="0.2">
    <p class="section-title">請填寫訂購人資訊</p>
    <div class="input-container">
      <div class="input-group">
        <label for="customerName">訂購人姓名</label>
        <input type="text" id="customerName" placeholder="請輸入姓名">
      </div>
      <div class="input-group">
        <label for="customerPhone">訂購人電話</label>
        <input type="text" id="customerPhone" placeholder="請輸入電話" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
      </div>
    </div>
  </section>

  <section class="reveal right" data-delay="0.4">
    <p class="section-title">請選擇購買數量與寄送方式，系統將自動計算金額</p>
    <table id="productTable">
      <tr><th>品項</th><th>價格</th><th>數量</th><th>小計</th></tr>
      <tr>
        <td>麻辣底料包<br><small>(2人份)</small></td>
        <td>$320</td>
        <td><select id="qty1" onchange="calculate()"></select></td>
        <td id="sub1">$0</td>
      </tr>
    </table>
  </section>

  <section class="reveal left" data-delay="0.6">
    <table id="shippingTable">
      <tr><th>寄送方式</th><th>價格</th><th>請勾選</th><th>小計</th></tr>
      <tr><td>711超商取貨</td><td>$60</td><td><input type="checkbox" id="ship711" onchange="selectShip('711')"></td><td id="sub711">$0</td></tr>
      <tr><td>郵局宅配</td><td>$120</td><td><input type="checkbox" id="shipPost" onchange="selectShip('post')"></td><td id="subPost">$0</td></tr>
    </table>
    <div class="total" id="total">總金額：$0</div>
  </section>

  <section class="reveal right" data-delay="0.8">
    <div class="account-box">
      <h3>請匯款至以下帳戶:</h3>
      <p>台新銀行 812　帳號：<span id="accountNumber">123456789</span> 陳慧珍</p>
      <button class="copy-btn" onclick="copyAccount()">複製匯款帳號</button>
    </div>
  </section>

  <section class="reveal left" data-delay="1.0">
    <div id="buttonContainer">
      <button id="screenshotBtn" onclick="screenshotOrder()">截圖訂單</button>
      <button id="formBtn" onclick="goToForm()">下一步,填寫寄送資訊</button>
    </div>
    <p id="formReminder">煩請先匯款後,一定要按下一步填寫寄送資訊!</p>
  </section>
</main>

<script>
window.addEventListener('DOMContentLoaded',()=>{
  const select=document.getElementById('qty1');
  for(let i=0;i<=35;i++){const opt=document.createElement('option');opt.value=i;opt.textContent=i;select.appendChild(opt);}
  select.value="0"; calculate();

  const intro=document.getElementById('intro');
  const logo=document.getElementById('intro-logo');
  const btn=document.getElementById('startBtn');
  const main=document.getElementById('mainContent');

  // LOGO 淡入 → 淡出 → 文字淡入 → 按鈕出現
  setTimeout(()=>logo.classList.add('show'),300);
  setTimeout(()=>logo.classList.add('hide'),2500);
  setTimeout(()=>document.querySelectorAll('#intro-text p').forEach(p=>p.classList.add('show')),3200);
  setTimeout(()=>btn.classList.add('show'),6700);

  // 點擊按鈕進入主頁
  btn.addEventListener('click',()=>{
    intro.classList.add('fade-out');
    setTimeout(()=>{
      intro.style.display='none';
      main.classList.add('show');
      document.querySelectorAll('.reveal').forEach((el,i)=>setTimeout(()=>el.classList.add('in'),i*200));
      setTimeout(()=>document.getElementById('formReminder').classList.add('in'),1400);
    },800);
  });
});

function calculate(){
  const qty1=parseInt(document.getElementById('qty1').value)||0;
  document.getElementById('sub1').innerText='$'+(qty1*320);
  let ship=0;
  const c711=document.getElementById('ship711').checked;
  const cPost=document.getElementById('shipPost').checked;
  if(c711) ship=60;
  if(cPost) ship=120;
  document.getElementById('sub711').innerText=c711?'$60':'$0';
  document.getElementById('subPost').innerText=cPost?'$120':'$0';
  document.getElementById('total').innerText='總金額：$'+(qty1*320+ship);
}
function selectShip(type){
  if(type==='711') document.getElementById('shipPost').checked=false;
  if(type==='post') document.getElementById('ship711').checked=false;
  calculate();
}
function copyAccount(){
  navigator.clipboard.writeText(document.getElementById('accountNumber').innerText);
  alert('匯款帳號已複製！記得匯款後再按下一步填寫寄送資訊！');
}
function screenshotOrder(){
  html2canvas(document.getElementById('mainContent')).then(canvas=>{
    const link=document.createElement('a');
    link.href=canvas.toDataURL('image/png');
    link.download='liu_mama_order.png';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    alert('截圖已下載！記得填寫表單喔！');
  });
}
function goToForm(){
  const name=document.getElementById('customerName').value.trim();
  const phone=document.getElementById('customerPhone').value.trim();
  const qty=parseInt(document.getElementById('qty1').value)||0;
  const ship711=document.getElementById('ship711').checked;
  const shipPost=document.getElementById('shipPost').checked;

  document.getElementById('customerName').classList.remove('input-error');
  document.getElementById('customerPhone').classList.remove('input-error');

  let err='';
  if(!name){ err+='請輸入訂購人姓名！\\n'; document.getElementById('customerName').classList.add('input-error'); }
  if(!phone){ err+='請輸入訂購人電話！\\n'; document.getElementById('customerPhone').classList.add('input-error'); }
  else if(!/^\\d{10}$/.test(phone)){ err+='訂購人電話必須為10碼數字！\\n'; document.getElementById('customerPhone').classList.add('input-error'); }
  if(qty<=0) err+='請選擇購買數量！\\n';
  if(!ship711 && !shipPost) err+='請選擇寄送方式！';

  if(err){ alert('訂單填寫不完整:\\n'+err); return; }

  const ship=ship711?'711超商取貨':'郵局宅配';
  const total=qty*320+(ship711?60:120);

  const formUrl=`https://docs.google.com/forms/d/e/1FAIpQLScXsrY_3yROVmqR3sa-WecBs4y8wKeZuPLSM0QNgy602xEWJA/viewform?usp=pp_url`
    +`&entry.1152845848=${encodeURIComponent(name)}`
    +`&entry.178268335=${encodeURIComponent(phone)}`
    +`&entry.1732058404=${qty}`
    +`&entry.509305715=${encodeURIComponent(ship)}`
    +`&entry.1351577488=${total}`;
  window.open(formUrl,'_blank');
}
</script>
</body>
</html>
