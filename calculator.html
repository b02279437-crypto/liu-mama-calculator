<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>LIU MAMA Order</title>

<!-- 字體 -->
<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Noto+Serif+TC:wght@500;600&display=swap" rel="stylesheet">
<!-- 截圖功能 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

<!-- 預載圖片（路徑不變） -->
<link rel="preload" as="image" href="https://raw.githubusercontent.com/b02279437-crypto/liu-mama-calculator/main/logo.png">
<link rel="preload" as="image" href="https://raw.githubusercontent.com/b02279437-crypto/liu-mama-calculator/main/LOGO2-removebg-preview.png">

<style>
:root{
  --milk:#E8D9C4; --navy:#1E4F7B; --bg:#f7f6f2; --gray-blue:#7f9bb3; --milk-solid:#e9e3d7;
  --ease:cubic-bezier(.22,.61,.36,1); --ease-soft:cubic-bezier(.2,.7,.2,1);
  --t-fast:.25s; --t-base:.6s; --t-slow:1.2s;
  --control-h:44px;
  --qty-btn-w:32px;      /* Stepper 按鈕寬 */
  --qty-disp-w:58px;     /* Stepper 中間欄寬 */
}

html{-webkit-text-size-adjust:100%;}
*{-webkit-tap-highlight-color:transparent; box-sizing:border-box;}
button{touch-action:manipulation;}

/* ===== 全域 ===== */
html,body{
  margin:0; padding:0; height:100%;
  background:linear-gradient(to bottom,#f9f8f4 0%,#f7f6f2 100%);
  color:#2c3e50;
  font-family:'Noto Serif TC','Microsoft JhengHei',serif;
  text-align:center; overflow-x:hidden; scroll-behavior:smooth;
}
table td,table th,.total,#qty1,#formReminder,.ship-price{
  font-variant-numeric:tabular-nums lining-nums;
  font-feature-settings:"tnum" 1,"lnum" 1;
  letter-spacing:.02em;
}

/* ===== 開場動畫 ===== */
#intro{
  position:fixed; inset:0; background-color:var(--bg);
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  padding-top:14vh; z-index:9999; transition:opacity var(--t-slow) var(--ease);
}
#intro.fade-out{opacity:0; pointer-events:none;}
#intro-logo,#intro-hero,#startBtn,#intro-text{will-change:transform,opacity;}

#intro-logo{
  width:80vw; max-width:550px; opacity:0; transform:scale(.99);
  transition:opacity var(--t-slow) var(--ease), transform var(--t-slow) var(--ease);
}
#intro-logo.show{opacity:1; transform:scale(1.03);}
#intro-logo.hide{opacity:0; transform:scale(1.03); transition:opacity var(--t-base) var(--ease);}
#intro-hero{
  width:clamp(260px,56vw,360px);
  opacity:0; transform:translateY(8px);
  transition:opacity var(--t-base) var(--ease), transform var(--t-base) var(--ease);
  margin:18px auto -70px; filter:drop-shadow(0 10px 14px rgba(0,0,0,.12));
}
#intro-hero.show{opacity:1; transform:translateY(0);}
#intro-text{
  font-weight:500; color:#333; font-size:15px; line-height:1.9;
  opacity:0; white-space:pre-line; margin-top:-36px; letter-spacing:.5px;
  transition:opacity var(--t-base) var(--ease);
}
#intro-text.show{opacity:1;}
#startBtn{
  margin-top:14px; padding:12px 40px; font-size:30px;
  font-family:'Amatic SC',cursive; letter-spacing:2px;
  background-color:#ddd5c7; color:#2c3e50; border:none; border-radius:999px; cursor:pointer;
  box-shadow:0 3px 10px rgba(0,0,0,.08);
  opacity:0; transform:translateY(10px); transition:all var(--t-base) var(--ease);
  position:relative; overflow:hidden; isolation:isolate;
}
#startBtn.show{animation:fadeUp .8s var(--ease) forwards;}
@keyframes fadeUp{0%{opacity:0; transform:translateY(10px);}100%{opacity:1; transform:translateY(0);}}
#startBtn:hover{background-color:#e7dfd2; transform:translateY(-2px);}
#startBtn::after{
  content:""; position:absolute; inset:auto; width:10px; height:10px; border-radius:50%;
  background:radial-gradient(circle, rgba(30,79,123,.2) 0%, rgba(30,79,123,0) 70%);
  transform:translate(-50%,-50%) scale(1); opacity:0; pointer-events:none;
}
#startBtn.rippling::after{ left:var(--rx); top:var(--ry); animation:rippleInk .9s var(--ease-soft); }
@keyframes rippleInk{
  0%{opacity:.4; transform:translate(-50%,-50%) scale(0);}
  70%{opacity:.25; transform:translate(-50%,-50%) scale(25);}
  100%{opacity:0; transform:translate(-50%,-50%) scale(38);}
}

/* ===== 主內容 ===== */
main{opacity:0; visibility:hidden; transition:opacity var(--t-slow) var(--ease);}
main.show{opacity:1; visibility:visible;}
h2{
  font-size:90px; font-weight:900; color:#1E4F7B;
  margin:28px 0 10px 0; animation:titleFade 1.1s var(--ease) forwards;
}
@keyframes titleFade{0%{opacity:0; transform:translateY(12px) scale(.98);}100%{opacity:1; transform:translateY(0) scale(1);}}
h2 .english{font-family:'Amatic SC',cursive; font-weight:900;}
.section-title{font-size:14px; color:#555; margin:10px 0 8px;}
.reveal{opacity:0; transform:translateY(28px); transition:opacity .9s var(--ease), transform .9s var(--ease);}
.reveal.in{opacity:1; transform:translateY(0);}

/* ===== 訂購資訊卡片 ===== */
.input-container{
  max-width:470px; margin:0 auto 26px; text-align:left;
  background:#fff; padding:24px 24px; border-radius:16px;
  box-shadow:0 5px 20px rgba(0,0,0,.05);
}
.input-group{display:flex; flex-direction:column; gap:5px; margin-bottom:16px;}
.input-group label{font-size:14px; color:#333;}
.input-group input{
  font-size:16px; height:var(--control-h); line-height:42px;
  padding:0 12px; border:1px solid #cfd6df; border-radius:10px; background:#fafafa;
  transition:all var(--t-fast) var(--ease);
}
.input-group input:focus{border-color:#1E4F7B; background:#fff; box-shadow:0 0 10px rgba(30,79,123,.25);}

/* ===== 表格（縮窄＋比例調整） ===== */
table{
  width:82%; max-width:420px; margin:14px auto;
  border-collapse:separate; border-spacing:0; background:#fff; border-radius:16px; overflow:hidden;
  box-shadow:0 2px 10px rgba(0,0,0,.06); font-size:15px; text-align:center;
}
th,td{ padding:10px; border-bottom:1px solid #e9eef2; vertical-align:middle; white-space:nowrap; }
th{ background-color:var(--gray-blue); color:#fff; font-weight:500; }
.col-item{  width:46%; }     /* 品項更窄 */
.col-price{ width:80px; }
.col-action{width:140px; }
#productTable td:nth-child(3), #productTable th:nth-child(3){ padding-left:4px; padding-right:4px; }

/* ===== Stepper（高級質感） ===== */
.qty-stepper{
  display:inline-flex; align-items:center; height:var(--control-h);
  border:1px solid #c9d0da; border-radius:12px; background:rgba(255,255,255,.92);
  box-shadow:inset 0 1px 2px rgba(255,255,255,.85), 0 2px 6px rgba(0,0,0,.05);
  overflow:hidden; transition:box-shadow var(--t-fast);
  will-change:transform;
}
.qty-stepper:hover{box-shadow:0 6px 18px rgba(30,79,123,.10);}
.qty-btn{
  width:var(--qty-btn-w); height:100%; border:none;
  background:#f2f4f6; font-size:20px; color:#2d3b4a;
  display:flex; align-items:center; justify-content:center; cursor:pointer; user-select:none;
  transition:transform .12s ease, background .2s ease;
}
.qty-btn:hover{background:#ebedf0;}
.qty-btn:active{transform:scale(.92);}
.qty-input{
  width:var(--qty-disp-w); height:100%;
  border:none; text-align:center; font-size:16px; font-weight:600; color:#1E4F7B;
  background:linear-gradient(to bottom,rgba(255,255,255,.98),#f7f8fa);
  box-shadow:inset 0 1px 1px rgba(0,0,0,.04);
  border-left:1px solid #e6e9ef; border-right:1px solid #e6e9ef;
}

/* ===== 寄送方式：卡片縮窄＋選取更明顯 ===== */
.ship-wrap{
  width:82%; max-width:360px; margin:10px auto 6px;
  display:flex; gap:10px; justify-content:center;
}
.ship-card{
  flex:1; position:relative; border-radius:14px;
  background:rgba(255,255,255,.72); backdrop-filter:blur(6px);
  border:1px solid rgba(31,42,51,.10);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6), 0 5px 14px rgba(0,0,0,.05);
  padding:12px; cursor:pointer; user-select:none;
  display:flex; flex-direction:column; align-items:center; gap:6px;
  transition:transform var(--t-fast) var(--ease), box-shadow var(--t-fast) var(--ease), border-color var(--t-fast) var(--ease), background-color var(--t-fast) var(--ease);
}
.ship-card:hover{transform:translateY(-2px);}
.ship-card.pressed{transform:scale(.98);}

.ship-card.selected{
  border-color:#1E4F7B;
  transform:translateY(-2px) scale(1.01);
  background:linear-gradient(180deg, rgba(30,79,123,.06), rgba(255,255,255,.85));
  box-shadow:
    0 10px 24px rgba(30,79,123,.16),
    0 0 0 6px rgba(30,79,123,.08);
}
.ship-card.selected .ship-title,
.ship-card.selected .ship-price{ color:#1E4F7B; text-shadow:0 0 1px rgba(30,79,123,.06); }

/* 右上角 ✓ 圓徽章 */
.ship-card.selected::after{
  content:"✓";
  position:absolute; top:8px; right:8px;
  width:22px; height:22px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:13px;
  background:#1E4F7B; color:#fff;
  box-shadow:0 2px 6px rgba(30,79,123,.35);
}

/* 隱藏原生 radio */
.ship-card input{ position:absolute; inset:0; opacity:0; }

/* ===== Total（柔光再亮一點） ===== */
.total{
  font-family:'Amatic SC', cursive;
  font-size:30px; font-weight:900; letter-spacing:2.5px; color:#1E4F7B;
  margin-top:14px; position:relative; display:inline-block;
  padding:6px 18px; opacity:0; transform:translateY(10px) scale(.96);
  transition:opacity var(--t-slow) var(--ease), transform var(--t-slow) var(--ease);
}
.total.show{opacity:1; transform:translateY(0) scale(1);}
.total::before{
  content:""; position:absolute; left:0; top:50%; width:100%; height:64%;
  transform:translateY(-50%) rotate(-1.2deg);
  background:linear-gradient(120deg, rgba(255,229,185,.75), rgba(255,215,160,.55));
  border-radius:12px; filter:blur(1px); opacity:.68; mix-blend-mode:soft-light;
}
@keyframes glowPulse{
  0%{opacity:.4; filter:brightness(1);}
  50%{opacity:.9; filter:brightness(1.25);}
  100%{opacity:.45; filter:brightness(1);}
}
.total.glow::before{ animation:glowPulse 1.8s var(--ease) 1; }

/* ===== 匯款資訊＋短版按鈕 ===== */
.account-box{
  width:85%; max-width:350px; margin:22px auto 0;
  background:rgba(255,255,255,.55); backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,.4); color:#333;
  padding:16px; border-radius:16px; font-size:13px;
  box-shadow:0 8px 24px rgba(0,0,0,.07);
}
.account-box h3{margin:8px 0; font-weight:600; font-size:15px; color:#44566C; letter-spacing:.5px;}

#buttonContainer{display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:18px;}

.btn{
  --btn-pad-y:10px; --btn-pad-x:16px;
  border:1px solid transparent; padding:var(--btn-pad-y) var(--btn-pad-x);
  border-radius:12px; font-size:15px; font-weight:600; letter-spacing:.3px;
  cursor:pointer; transition:transform var(--t-fast) var(--ease), box-shadow var(--t-fast) var(--ease), background-color var(--t-fast) var(--ease), border-color var(--t-fast) var(--ease);
  white-space:nowrap; box-shadow:0 3px 10px rgba(0,0,0,.06);
}
.btn:active{transform:scale(.98);}
.btn-outline{ background:rgba(255,255,255,.9); color:#1f2a33; border-color:#e2e6eb; }
.btn-outline:hover{box-shadow:0 6px 16px rgba(0,0,0,.08); background:#fff;}
.btn-primary{ background:#1E4F7B; color:#fff; border-color:#1E4F7B; }
.btn-primary:hover{background:#245c91; box-shadow:0 6px 18px rgba(30,79,123,.28);}

#formReminder{font-size:14px; color:#555; margin-top:12px; opacity:0; transform:translateY(14px); transition:opacity .8s var(--ease), transform .8s var(--ease);}
#formReminder.in{opacity:1; transform:translateY(0);}

/* ===== Toast ===== */
.toast{
  position:fixed; left:50%; bottom:22px; transform:translateX(-50%) translateY(20px);
  min-width:240px; max-width:86vw; background:rgba(30,79,123,.92); color:#fff; padding:12px 16px;
  border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.18);
  font-size:14px; opacity:0; pointer-events:none; z-index:99999;
  transition:opacity var(--t-base) var(--ease), transform var(--t-base) var(--ease);
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(0);}

/* ===== 手機優化 ===== */
@media (max-width:480px){
  h2{font-size:64px;}
  table{width:94%; font-size:13.5px;}
  .col-item{width:50%;}
  .col-price{width:72px;}
  .col-action{width:122px;}
  .ship-wrap{width:94%; max-width:340px; gap:8px;}
  .ship-card{padding:10px;}
  .btn{font-size:16px;}
}

/* ===== 無動化偏好 ===== */
@media (prefers-reduced-motion:reduce){
  *{animation:none!important; transition:none!important;}
  #startBtn::after{display:none!important;}
}
</style>
</head>

<body>
<!-- ===== 開場 ===== -->
<div id="intro">
  <img id="intro-logo" decoding="async" loading="eager"
       src="https://raw.githubusercontent.com/b02279437-crypto/liu-mama-calculator/main/logo.png" alt="Logo">
  <img id="intro-hero" decoding="async" loading="eager"
       src="https://raw.githubusercontent.com/b02279437-crypto/liu-mama-calculator/main/LOGO2-removebg-preview.png" alt="Liu Mama Secondary Logo">

  <div id="intro-text">
2015年遠赴四川成都， 
學習正宗麻辣鍋底與紅油煉製。
手工慢炒堆疊香氣，濃郁而不膩。

劉嘛麻，一鍋來自初心的麻辣香氣，
陪你溫暖每一餐。
  </div>
  <button id="startBtn">Start Order</button>
</div>

<!-- ===== 主內容 ===== -->
<main id="mainContent" aria-describedby="formReminder">
  <h2 id="pageTitle"><span class="english">LIU MAMA Order</span></h2>

  <section class="reveal">
    <p class="section-title">請填寫訂購人資訊</p>
    <div class="input-container">
      <div class="input-group">
        <label for="customerName">訂購人姓名</label>
        <input type="text" id="customerName" placeholder="請輸入姓名" autocomplete="name" enterkeyhint="next">
      </div>
      <div class="input-group">
        <label for="customerPhone">訂購人電話</label>
        <input type="text" id="customerPhone" placeholder="請輸入電話" inputmode="numeric" pattern="[0-9]*" maxlength="10" autocomplete="tel">
      </div>
    </div>
  </section>

  <section class="reveal">
    <p class="section-title">請選擇購買數量與寄送方式，系統將自動計算金額</p>
    <table id="productTable">
      <colgroup>
        <col class="col-item"><col class="col-price"><col class="col-action">
      </colgroup>
      <tr><th>品項</th><th>價格</th><th>數量</th></tr>
      <tr>
        <td>手抄麻辣底料包<br><small>(2人份)</small></td>
        <td>$320</td>
        <td>
          <div class="qty-stepper" role="group" aria-label="數量">
            <button type="button" class="qty-btn" id="qtyMinus" aria-label="減少">−</button>
            <input id="qtyInput" class="qty-input" type="text" inputmode="numeric" pattern="[0-9]*" maxlength="2"
                   value="0" role="spinbutton" aria-valuemin="0" aria-valuemax="35" aria-valuenow="0" aria-live="polite">
            <button type="button" class="qty-btn" id="qtyPlus" aria-label="增加">＋</button>
          </div>
          <select id="qty1" onchange="calculate()" aria-label="數量" hidden></select>
        </td>
      </tr>
    </table>
  </section>

  <!-- 寄送方式：卡片式並排 -->
  <section class="reveal">
    <div class="ship-wrap" role="radiogroup" aria-label="寄送方式">
      <label class="ship-card" for="ship711">
        <input type="radio" name="shipMethod" id="ship711" value="711">
        <div class="ship-title">711超商取貨</div>
        <div class="ship-price">$60</div>
      </label>
      <label class="ship-card" for="shipPost">
        <input type="radio" name="shipMethod" id="shipPost" value="post">
        <div class="ship-title">郵局宅配</div>
        <div class="ship-price">$120</div>
      </label>
    </div>

    <div class="total" id="total" role="status" aria-live="polite" aria-atomic="true">Total Amount: $0</div>
  </section>

  <!-- 匯款資訊 + 短版按鈕 -->
  <section class="reveal">
    <div class="account-box">
      <h3>請匯款至以下帳戶:</h3>
      <p>台新銀行 812　帳號：<span id="accountNumber">123456789</span> 陳慧珍</p>
      <div id="buttonContainer">
        <button id="screenshotBtn" class="btn btn-outline" type="button">截圖訂單</button>
        <button id="formBtn" class="btn btn-primary" type="button">下一步,填寫寄送資訊</button>
      </div>
    </div>
    <p id="formReminder">煩請先匯款後,一定要按下一步填寫寄送資訊!</p>
  </section>
</main>

<!-- Toast -->
<div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

<script>
/* ===== 小工具 ===== */
function imgReady(el){
  if(el.complete){
    if('decode' in el){ return el.decode().catch(()=>{}); }
    return Promise.resolve();
  }
  return new Promise(res=>{
    el.addEventListener('load', res, {once:true});
    el.addEventListener('error', res, {once:true});
  });
}
function triggerRipple(e){
  const btn=e.currentTarget, rect=btn.getBoundingClientRect();
  btn.style.setProperty('--rx',(e.clientX-rect.left)+'px');
  btn.style.setProperty('--ry',(e.clientY-rect.top)+'px');
  btn.classList.remove('rippling'); void btn.offsetWidth; btn.classList.add('rippling');
}
function showToast(msg){
  const el=document.getElementById('toast');
  if(!el){ alert(msg); return; }
  el.textContent=msg; el.classList.add('show');
  clearTimeout(showToast._t);
  showToast._t=setTimeout(()=>el.classList.remove('show'),2200);
}

/* ===== 計算金額（含柔光動畫） ===== */
let lastTotal=0;
function calculate(isInit){
  const qty=parseInt(document.getElementById('qty1').value)||0;
  let ship=0;
  const method=document.querySelector('input[name="shipMethod"]:checked');
  if(method){ ship=(method.value==='711')?60:120; }
  const newTotal=qty*320+ship;
  animateTotal(newTotal, !!isInit);
}
function animateTotal(target,isInit){
  const el=document.getElementById('total');
  if(isInit){ lastTotal=target; el.textContent='Total Amount: $'+target; el.classList.add('show'); return; }
  el.classList.remove('glow'); void el.offsetWidth; el.classList.add('glow');
  if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){ lastTotal=target; el.textContent='Total Amount: $'+target; return; }
  const dur=850, t0=performance.now(), from=lastTotal, d=target-from, ease=t=>1-Math.pow(1-t,3);
  function frame(now){ const p=Math.min(1,(now-t0)/dur); const v=Math.round(from+d*ease(p));
    el.textContent='Total Amount: $'+v; if(p<1){ requestAnimationFrame(frame);} else { lastTotal=target; } }
  requestAnimationFrame(frame);
}

/* ===== 事件與初始化 ===== */
window.addEventListener('DOMContentLoaded',()=>{
  // 建立 0–35 選項
  const select=document.getElementById('qty1');
  for(let i=0;i<=35;i++){ const o=document.createElement('option'); o.value=i; o.textContent=i; select.appendChild(o); }
  select.value="0";

  // Stepper 行為
  const minus=document.getElementById('qtyMinus');
  const plus=document.getElementById('qtyPlus');
  const input=document.getElementById('qtyInput');
  const clamp=n=>{ n=Number(n); if(Number.isNaN(n)) n=0; return Math.min(35, Math.max(0, n|0)); };
  function syncTo(val, trigger=true){
    const v=clamp(val);
    if(select.value!==String(v)) select.value=String(v);
    if(input.value!==String(v)) input.value=String(v);
    input.setAttribute('aria-valuenow', String(v));
    if(trigger) calculate();
  }
  minus.addEventListener('click', ()=>syncTo(Number(select.value)-1));
  plus .addEventListener('click', ()=>syncTo(Number(select.value)+1));
  input.addEventListener('input', ()=>{ input.value=input.value.replace(/[^0-9]/g,'').slice(0,2); syncTo(input.value===''?0:input.value,true); });
  input.addEventListener('blur', ()=>syncTo(input.value===''?0:input.value,true));

  // 寄送方式切換 → 更新價格 + 樣式選中（選取更明顯）
  function refreshShipCards(){
    document.querySelectorAll('.ship-card').forEach(card=>{
      const ck=card.querySelector('input[type="radio"]');
      card.classList.toggle('selected', ck.checked);
    });
  }
  document.querySelectorAll('input[name="shipMethod"]').forEach(r=>{
    r.addEventListener('change', ()=>{ refreshShipCards(); calculate(); });
  });

  // 卡片按下壓按感
  document.querySelectorAll('.ship-card').forEach(card=>{
    card.addEventListener('pointerdown', ()=>card.classList.add('pressed'));
    ['pointerup','pointercancel','pointerleave'].forEach(ev=>card.addEventListener(ev, ()=>card.classList.remove('pressed')));
    // 點擊整張卡＝點選 radio
    card.addEventListener('click', ()=>{
      const radio=card.querySelector('input[type="radio"]');
      radio.checked=true;
      refreshShipCards();
      calculate();
    });
  });

  // 開場動線
  startIntroSequence();

  // 初始計算
  calculate(true);

  // 按鈕事件
  document.getElementById('screenshotBtn').addEventListener('click', screenshotOrder);
  document.getElementById('formBtn').addEventListener('click', goToForm);
});

/* ===== 開場流程 ===== */
async function startIntroSequence(){
  const logo=document.getElementById('intro-logo');
  const hero=document.getElementById('intro-hero');
  const text=document.getElementById('intro-text');
  const btn=document.getElementById('startBtn');
  const maxWait=new Promise(r=>setTimeout(r,4000));
  await Promise.race([Promise.all([imgReady(logo), imgReady(hero)]), maxWait]);
  requestAnimationFrame(()=>{
    logo.classList.add('show');
    setTimeout(()=>logo.classList.add('hide'),2000);
    setTimeout(()=>{ logo.style.display='none'; hero.classList.add('show'); text.classList.add('show'); },3200);
    setTimeout(()=>btn.classList.add('show'),4800);
  });

  // 進主頁
  const intro=document.getElementById('intro');
  const main=document.getElementById('mainContent');
  btn.addEventListener('click',(e)=>{
    triggerRipple(e);
    intro.classList.add('fade-out');
    setTimeout(()=>{
      intro.style.display='none';
      main.classList.add('show');
      document.querySelectorAll('.reveal').forEach((el,i)=>setTimeout(()=>el.classList.add('in'), i*160));
      setTimeout(()=>document.querySelector('.total').classList.add('show'),900);
      setTimeout(()=>document.getElementById('formReminder').classList.add('in'),1000);
    },600);
  });
}

/* ===== 複製帳號／截圖／送表單 ===== */
function copyAccount(){
  const acct=document.getElementById('accountNumber').innerText;
  if(navigator.clipboard && window.isSecureContext){
    navigator.clipboard.writeText(acct).then(()=>{ showToast('匯款帳號已複製'); })
    .catch(()=>alert('已複製'));
  }else{
    const ta=document.createElement('textarea'); ta.value=acct; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
    showToast('匯款帳號已複製');
  }
}
function screenshotOrder(){
  if(typeof html2canvas==='undefined'){ alert('截圖功能庫尚未載入，請稍後再試。'); return; }
  html2canvas(document.getElementById('mainContent')).then(c=>{
    const a=document.createElement('a'); a.href=c.toDataURL('image/png'); a.download='liu_mama_order.png'; a.click();
    showToast('截圖已下載！');
  });
}
function goToForm(){
  const name=document.getElementById('customerName').value.trim();
  const phone=document.getElementById('customerPhone').value.trim();
  const qty=parseInt(document.getElementById('qty1').value)||0;
  const method=document.querySelector('input[name="shipMethod"]:checked');
  if(!name||!phone||!method||qty<=0){ showToast('請完整填寫資訊'); return; }
  const total=qty*320+(method.value==='711'?60:120);
  const url=`https://docs.google.com/forms/d/e/1FAIpQLScXsrY_3yROVmqR3sa-WecBs4y8wKeZuPLSM0QNgy602xEWJA/viewform?usp=pp_url`
    +`&entry.1152845848=${encodeURIComponent(name)}`
    +`&entry.178268335=${encodeURIComponent(phone)}`
    +`&entry.1732058404=${qty}`
    +`&entry.509305715=${encodeURIComponent(method.value==='711'?'711超商取貨':'郵局宅配')}`
    +`&entry.1351577488=${total}`;
  window.open(url,'_blank');
}
</script>
</body>
</html>
